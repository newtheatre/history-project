// This file started life handling the report button and it's modal. The edit and history buttons then grew out of the report button and also live here.

@mixin tab($bg)
  background: $bg
  @include text-shadow-effect($bg)

$report-top: 245px
$report-spacing: 65px
$report-color-step: -60%

.side-tab
  position: fixed
  right: -195px

  opacity: 0.6
  color: $color-text-white

  @include respond-down(mob-land)
    display: none

  a
    padding: $baseline / 2 $baseline
    display: block
    color: $color-text-white


  i, p
    line-height: $baseline

  i
    float: left
    font-size: $base-font-size * 2
    padding-right: $baseline

  p
    font-size: $base-font-size
    font-weight: bold
    min-width: 220px


  @include transition(all ease-out 0.25s)

  &:hover
    right: 0px
    opacity: 1
    cursor: hand

.report-tab
  top: $report-top
  @include tab($color-nnt-purple)

.edit-tab
  top: $report-top + $report-spacing
  @include tab(adjust-hue($color-nnt-purple, $report-color-step))

.history-tab
  top: $report-top + $report-spacing * 2
  @include tab(adjust-hue($color-nnt-purple, $report-color-step*2))

.blame-tab
  top: $report-top + $report-spacing * 3
  @include tab(adjust-hue($color-nnt-purple, $report-color-step*3))

.report
  display: none
  &.report-show
    display: block



.report-bg
  z-index: 100

  position: fixed
  top: 0
  right: 0
  background: black
  opacity: 0.6
  width: 100%
  height: 100%

.report-modal
  z-index: 110
  $width: 660px

  background: $color-text-white
  color: $color-text-black
  width: $width
  margin-left: -$width / 2
  margin-right: -$width / 2

  position: fixed
  top: 50px
  left: 50%

  padding: $baseline

  a
    color: lighten($color-info, 20%)
    // &:hover
    //   text-decoration: underline

.report-close
  position: absolute
  top: 0px
  right: 0px
  width: 32px
  height: 32px
  background: $color-error
  color: $color-text-white
  padding-left: 9px
  font-size: 22px
  border-radius: 0 0 0 4px
  opacity: 0.9

  &:hover
    background: lighten($color-error, 5%)

.report-text, .report-textarea, .report-submit
  @include block
  width: 100%
  font-size: $base-font-size
  padding: $baseline / 2

.report-textarea
  height: 200px

.report-submit
  width: 100%
  $bg: lighten($color-info, 20%)
  background: $bg
  border: none
  border-bottom: 4px lighten($color-info, 8%) solid
  color: $color-text-white
  @include text-shadow-effect($bg)

  position: relative

  &:active
    top: 1px

  &.disabled
    background: $color-grey-dark
    border-bottom-color: darken($color-grey-dark, 12%)
    @include text-shadow-effect($color-grey-dark)

.improve
  @extend .report

.improve-bg
  @extend .report-bg

.improve-modal
  @extend .report-modal

.improve-modal-content
  @extend .report-improve-modal-content !optional

.improve-close
  @extend .report-close

.improve-actions
  @include grid-row

.improve-action
  @include grid-x-percent(50%)
  text-align: center

  a.button
    color: $color-text-white

    // Fix for button with half margin-bottom
    margin-bottom: $baseline / 2
    &:active
      margin-bottom: ($baseline / 2) + 1

  p
    font-size: $base-font-size-compact

.button-improve, a.button-improve
  @include button($color-success)